#!/bin/bash

DESCRIPTS=`dirname $0`

echo "Creating default-ssl virtual host in /etc/apache2/sites-available"
sudo cp default-ssl.sample /etc/apache2/sites-available/00000-default-ssl
sudo a2ensite /etc/apache2/sites-available
sudo /etc/init.d/apache2 reload

if [ -d /opt/cronus/ ] ; then
    echo "Please Delete directory /opt/cronus to proceed. Exiting"
    #exit 1
fi

echo "Creating directory /opt/cronus"
echo "Copying required scripts to /opt/cronus/shell"
if [ ! -d /opt/cronus/shell ] ; then
    mkdir -p /opt/cronus/shell
fi

cd ../shell
cp -r * /opt/cronus/shell


echo "Enter document root of your webserver"
read doc_root

echo "Copying REST api to ${doc_root}/api"
if [ ! -d /var/www/api ] ; then
    mkdir ${doc_root}/api
fi

cd ../../
cp -r api ${doc_root}

cd infra/rest
cp -r proxy ${doc_root}/api/

echo "Proxy Server successfully installed"
exit 0
